<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xyz.xcye.dao.PermissionDao">

    <!--配置映射-->
    <resultMap id="permissionResultMap" type="xyz.xcye.entity.table.Permission">
        <id column="uid" property="uid"/>
        <result column="role" property="role"/>
        <result column="permission" property="permission"/>
        <result column="path" property="path"/>
    </resultMap>

    <insert id="insertPermission" useGeneratedKeys="true" keyProperty="uid" keyColumn="uid">
        INSERT into au_permission (path,role,permission)
        VALUES(#{permission.path},#{permission.role},#{permission.permission})
    </insert>

    <update id="updatePermissionByUid" parameterType="int">
        UPDATE au_permission
        <set>
            <if test="permission.path != null">
                path=#{permission.path},
            </if>
            <if test="permission.role != null">
                role=#{permission.role},
            </if>
            <if test="permission.permission != null">
                permission=#{permission.permission}
            </if>
        </set>
        where uid=#{permission.uid}
    </update>

    <delete id="deletePermissionByUid">
        delete from au_permission where uid=#{uid}
    </delete>

    <select id="queryAllRole" resultMap="permissionResultMap">
        select * from au_permission
    </select>
</mapper>